<!DOCTYPE html><html lang="ko-KR" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="[Springboot] 페이징 + Fetch Join 쿼리로 OneToMany 할 때, 모든 엔티티를 불러오는 문제를 해결해보자" /><meta name="author" content="TaemHam" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="문제 상황" /><meta property="og:description" content="문제 상황" /><link rel="canonical" href="https://taemham.github.io/posts/Springboot_FetchJoin+Paging_Problem/" /><meta property="og:url" content="https://taemham.github.io/posts/Springboot_FetchJoin+Paging_Problem/" /><meta property="og:site_name" content="TaemHam" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-03-30T12:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Springboot] 페이징 + Fetch Join 쿼리로 OneToMany 할 때, 모든 엔티티를 불러오는 문제를 해결해보자" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"TaemHam","url":"https://github.com/TaemHam/"},"dateModified":"2023-03-30T17:15:11+09:00","datePublished":"2023-03-30T12:00:00+09:00","description":"문제 상황","headline":"[Springboot] 페이징 + Fetch Join 쿼리로 OneToMany 할 때, 모든 엔티티를 불러오는 문제를 해결해보자","mainEntityOfPage":{"@type":"WebPage","@id":"https://taemham.github.io/posts/Springboot_FetchJoin+Paging_Problem/"},"url":"https://taemham.github.io/posts/Springboot_FetchJoin+Paging_Problem/"}</script><title>[Springboot] 페이징 + Fetch Join 쿼리로 OneToMany 할 때, 모든 엔티티를 불러오는 문제를 해결해보자 | TaemHam</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="TaemHam"><meta name="application-name" content="TaemHam"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/TaemHam/Taemham.github.io/main/assets/img/pics/TaemHam_Face.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">TaemHam</a></div><div class="site-subtitle font-italic">and his devlog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/TaemHam" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['tk4003950','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Springboot] 페이징 + Fetch Join 쿼리로 OneToMany 할 때, 모든 엔티티를 불러오는 문제를 해결해보자</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 포스트</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> </span> <span id="search-cancel" >취소</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4 pb-5"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>[Springboot] 페이징 + Fetch Join 쿼리로 OneToMany 할 때, 모든 엔티티를 불러오는 문제를 해결해보자</h1><div class="post-meta text-muted"> <span> 게시 <em class="" data-ts="1680145200" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2023-03-30 </em> </span> <span> 업데이트 <em class="" data-ts="1680164111" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2023-03-30 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/TaemHam/">TaemHam</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="720 단어"> <em>4 분</em>읽는 시간</span></div></div></div><div class="post-content"><h2 id="문제-상황"><span class="mr-2">문제 상황</span><a href="#문제-상황" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>댓글이 일대다 매핑 된 게시글들을 페이지 단위로 불러오는 쿼리를 실행하면 OOM(메모리 초과) 문제가 발생하는 것을 확인했다.</p><p>문제가 되는 엔티티와 쿼리문은 다음과 같다.</p><details> <summary>게시글 엔티티</summary><div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="nd">@Builder</span>
<span class="nd">@Getter</span>
<span class="nd">@AllArgsConstructor</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Post</span> <span class="o">{</span>

    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@Column</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">title</span><span class="o">;</span>

    <span class="nd">@Column</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>

    <span class="nd">@OneToMany</span><span class="o">(</span><span class="n">mappedBy</span> <span class="o">=</span> <span class="s">"post"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Comment</span><span class="o">&gt;</span> <span class="n">comments</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addComment</span><span class="o">(</span><span class="nc">Comment</span> <span class="n">comment</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">comments</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">comment</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div></div></details> <details> <summary>댓글 엔티티</summary><div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="nd">@Builder</span>
<span class="nd">@Getter</span>
<span class="nd">@AllArgsConstructor</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Comment</span> <span class="o">{</span>

    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@Column</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>

    <span class="nd">@ManyToOne</span>
    <span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"post_id"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Post</span> <span class="n">post</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div></div></details> <details> <summary>게시글 리포지토리</summary><div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">PostRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="nd">@Query</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"SELECT DISTINCT p FROM Post p JOIN FETCH p.comments WHERE p.content LIKE %:content%"</span><span class="o">,</span>
            <span class="n">countQuery</span> <span class="o">=</span> <span class="s">"SELECT COUNT(DISTINCT p) FROM Post p INNER JOIN p.comments WHERE p.content LIKE %:content%"</span><span class="o">)</span>
    <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">&gt;</span> <span class="nf">findByContentWithFetchJoin</span><span class="o">(</span><span class="nc">String</span> <span class="n">content</span><span class="o">,</span> <span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div></div></details><h2 id="문제-원인"><span class="mr-2">문제 원인</span><a href="#문제-원인" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>문제는 아래의 상황에서 발생한다고 한다.</p><ol><li>OneToMany 매핑이 있는 엔티티<li>N+1 문제의 해결 방법인 Fetch Join을 사용<li>페이징 처리를 위해 Pageable 인터페이스를 사용</ol><p>이유는 다음과 같다.</p><p>컬렉션을 조인할 때 생기는 같은 식별자의 엔티티들을 distinct 쿼리로 제거해주면, 불러온 엔티티의 개수가 달라져 페이지에 담을 엔티티가 부족해지게 된다.</p><p>이런 상황이 발생하는 걸 막고자, JPA는 모든 엔티티를 불러와서 중복 제거를 하고, 그 후 페이지에 필요한 만큼 잘라내어 준다.</p><p>이렇게 모든 엔티티를 불러오는 과정때문에 메모리 초과 문제가 발생한 것.</p><p>출력된 쿼리문을 찾아보니, 엔티티를 모두 메모리에 올린다는 로그와 함께, 쿼리문에는 limit 같은 제한 조건이 걸려있지 않은 걸 확인했다.</p><p><img data-src="https://user-images.githubusercontent.com/95671168/228720611-256372e9-6318-4d7a-9b6d-1c3258e09a9b.PNG" alt="쿼리로그1" data-proofer-ignore></p><h2 id="해결-방법"><span class="mr-2">해결 방법</span><a href="#해결-방법" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Fetch Join이 아닌 Batch Size 를 설정해 N+1 문제를 해결하고, 쿼리문에서는 Fetch Join을 지워주면 된다.</p><details> <summary>application.yaml</summary><div><div class="language-yml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="na">spring</span><span class="pi">:</span>
<span class="na">jpa</span><span class="pi">:</span>
    <span class="na">properties</span><span class="pi">:</span>
    <span class="na">hibernate</span><span class="pi">:</span>
        <span class="na">default_batch_fetch_size</span><span class="pi">:</span> <span class="m">1000</span>
</pre></table></code></div></div></div></details> <details> <summary>게시글 리포지토리</summary><div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">PostRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="nd">@Query</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"SELECT p FROM Post p WHERE p.content LIKE %:content%"</span><span class="o">,</span>
            <span class="n">countQuery</span> <span class="o">=</span> <span class="s">"SELECT COUNT(p) FROM Post p WHERE p.content LIKE %:content%"</span><span class="o">)</span>
    <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">&gt;</span> <span class="nf">findByContentLike</span><span class="o">(</span><span class="nc">String</span> <span class="n">content</span><span class="o">,</span> <span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div></div></details><p>위와 같이 수정 한 후 쿼리문을 찾아보니, WARN 로그 없이 <code class="language-plaintext highlighter-rouge">fetch first ? rows only</code> 가 출력되는 것을 확인했다.</p><p><img data-src="https://user-images.githubusercontent.com/95671168/228720614-45cf2f19-55c4-4c9e-81da-bdd41f801b1a.PNG" alt="쿼리로그2" data-proofer-ignore></p><h2 id="참고-자료"><span class="mr-2">참고 자료</span><a href="#참고-자료" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="https://vladmihalcea.com/fix-hibernate-hhh000104-entity-fetch-pagination-warning-message/">The best way to fix the Hibernate “firstResult/maxResults specified with collection fetch; applying in memory!” warning message</a><li><a href="https://junhyunny.github.io/spring-boot/jpa/jpa-fetch-join-paging-problem/">JPA Fetch 조인(join)과 페이징(paging) 처리</a><li><a href="https://tecoble.techcourse.co.kr/post/2020-10-21-jpa-fetch-join-paging/">JPA에서 Fetch Join과 Pagination을 함께 사용할때 주의하자</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/springboot/'>Springboot</a>, <a href='/categories/db/'>DB</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cs/" class="post-tag no-text-decoration" >CS</a> <a href="/tags/db/" class="post-tag no-text-decoration" >DB</a> <a href="/tags/n-1/" class="post-tag no-text-decoration" >N+1</a> <a href="/tags/fetch-join/" class="post-tag no-text-decoration" >Fetch Join</a> <a href="/tags/onetomany/" class="post-tag no-text-decoration" >OneToMany</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유하기</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%5BSpringboot%5D+%ED%8E%98%EC%9D%B4%EC%A7%95+%2B+Fetch+Join+%EC%BF%BC%EB%A6%AC%EB%A1%9C+OneToMany+%ED%95%A0+%EB%95%8C%2C+%EB%AA%A8%EB%93%A0+%EC%97%94%ED%8B%B0%ED%8B%B0%EB%A5%BC+%EB%B6%88%EB%9F%AC%EC%98%A4%EB%8A%94+%EB%AC%B8%EC%A0%9C%EB%A5%BC+%ED%95%B4%EA%B2%B0%ED%95%B4%EB%B3%B4%EC%9E%90+-+TaemHam&url=https%3A%2F%2Ftaemham.github.io%2Fposts%2FSpringboot_FetchJoin%2BPaging_Problem%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%5BSpringboot%5D+%ED%8E%98%EC%9D%B4%EC%A7%95+%2B+Fetch+Join+%EC%BF%BC%EB%A6%AC%EB%A1%9C+OneToMany+%ED%95%A0+%EB%95%8C%2C+%EB%AA%A8%EB%93%A0+%EC%97%94%ED%8B%B0%ED%8B%B0%EB%A5%BC+%EB%B6%88%EB%9F%AC%EC%98%A4%EB%8A%94+%EB%AC%B8%EC%A0%9C%EB%A5%BC+%ED%95%B4%EA%B2%B0%ED%95%B4%EB%B3%B4%EC%9E%90+-+TaemHam&u=https%3A%2F%2Ftaemham.github.io%2Fposts%2FSpringboot_FetchJoin%2BPaging_Problem%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Ftaemham.github.io%2Fposts%2FSpringboot_FetchJoin%2BPaging_Problem%2F&text=%5BSpringboot%5D+%ED%8E%98%EC%9D%B4%EC%A7%95+%2B+Fetch+Join+%EC%BF%BC%EB%A6%AC%EB%A1%9C+OneToMany+%ED%95%A0+%EB%95%8C%2C+%EB%AA%A8%EB%93%A0+%EC%97%94%ED%8B%B0%ED%8B%B0%EB%A5%BC+%EB%B6%88%EB%9F%AC%EC%98%A4%EB%8A%94+%EB%AC%B8%EC%A0%9C%EB%A5%BC+%ED%95%B4%EA%B2%B0%ED%95%B4%EB%B3%B4%EC%9E%90+-+TaemHam" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="링크 복사하기" data-title-succeed="링크가 복사되었습니다!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">최근 업데이트</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Springboot_FetchJoin+Paging_Problem/">[Springboot] 페이징 + Fetch Join 쿼리로 OneToMany 할 때, 모든 엔티티를 불러오는 문제를 해결해보자</a><li><a href="/posts/CS_DatabaseBasic/">[CS] DB: DB란 무엇인가?</a><li><a href="/posts/CS_About_Process/">[CS] OS: 프로세스란?</a><li><a href="/posts/CS_MultiProcess/">[CS] OS: 멀티 프로세싱과 멀티 스레딩</a><li><a href="/posts/SpringBoot_AboutSpringSecurity/">[백엔드|스프링부트] 서버가 사용자를 인증하는 법 (JWT를 이용한 방법)</a></ul></div><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/backend/">Backend</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/springboot/">SpringBoot</a> <a class="post-tag" href="/tags/cs/">CS</a> <a class="post-tag" href="/tags/tutorial/">Tutorial</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/db/">DB</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/os/">OS</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">바로가기</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>관련된 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/CS_DatabaseBasic/"><div class="card-body"> <em class="small" data-ts="1677283200" data-df="YYYY-MM-DD" > 2023-02-25 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[CS] DB: DB란 무엇인가?</h3><div class="text-muted small"><p> 데이터베이스 데이터베이스란, 일정한 규칙 혹은 규약을 통해 구조화 되어 저장되는 데이터의 모음이다. 그런 데이터를 제어, 관리하는 통합 시스템을 DBMS(DataBase Management System)라고 하며, 데이터베이스 안에 있는 데이터들은 특정 DBMS마다 정의된 쿼리 언어를 통해 삽입, 삭제, 수정, 조회 등을 수행할 수 있다. 또, ...</p></div></div></a></div><div class="card"> <a href="/posts/CS_About_Key/"><div class="card-body"> <em class="small" data-ts="1677715200" data-df="YYYY-MM-DD" > 2023-03-02 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[CS] DB: 키의 종류</h3><div class="text-muted small"><p> 키 데이터베이스에서 키란, 조건에 만족하는 튜플을 찾거나 순서대로 정렬할 때 다른 튜플과 구별할 수 있는 유일한 기준이 되는 속성(Attribute)이다. 종류 키의 종류에는 5가지가 있다. 후보키 (Candidate key) 릴레이션(테이블)에서 각 튜플을 유일하게 식별할 수 있는 속성 또는 집합을 ...</p></div></div></a></div><div class="card"> <a href="/posts/CS_DB_Normalization/"><div class="card-body"> <em class="small" data-ts="1677808800" data-df="YYYY-MM-DD" > 2023-03-03 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[CS] DB: 정규화란?</h3><div class="text-muted small"><p> 정규화 정규화란, 관계형 데이터베이스의 설계에서 중복을 최소화하고, 독립적인 관계를 가진 속성을 분리시켜 데이터를 구조화하는 작업을 말한다. 정규화의 기본 목표는 관련이 없는 함수 종속성은 별개의 릴레이션으로 표현하는 것이다. 함수적 종속이란, 어떤 릴레이션 R의 속성 X와 Y에 대해, X의 값을 알면 Y의 값을 바로 식별할 수 있고, ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/CS_DB_Normalization/" class="btn btn-outline-primary" prompt="이전 글"><p>[CS] DB: 정규화란?</p></a><div class="btn btn-outline-primary disabled" prompt="다음 글"><p>-</p></div></div><script src="https://utteranc.es/client.js" repo="TaemHam/Taemham.github.io" issue-term="pathname" crossorigin="anonymous" async> </script> <script type="text/javascript"> $(function() { const origin = "https://utteranc.es"; const iframe = "iframe.utterances-frame"; const lightTheme = "github-light"; const darkTheme = "github-dark"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } addEventListener("message", (event) => { let theme; /* credit to <https://github.com/utterance/utterances/issues/170#issuecomment-594036347> */ if (event.origin === origin) { /* page initial */ theme = initTheme; } else if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); } else { return; } const message = { type: "set-theme", theme: theme }; const utterances = document.querySelector(iframe).contentWindow; utterances.postMessage(message, origin); }); }); </script></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/TaemHam">TaemHam</a>. <span data-toggle="tooltip" data-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다.">일부 권리 보유</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/backend/">Backend</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/springboot/">SpringBoot</a> <a class="post-tag" href="/tags/cs/">CS</a> <a class="post-tag" href="/tags/tutorial/">Tutorial</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/db/">DB</a> <a class="post-tag" href="/tags/network/">Network</a> <a class="post-tag" href="/tags/os/">OS</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">새 버전의 콘텐츠를 사용할 수 있습니다.</p><button type="button" class="btn btn-primary" aria-label="Update"> 업데이트 </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
